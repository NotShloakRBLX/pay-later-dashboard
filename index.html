<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum=1, viewport-fit=cover" />
<title>Card • Pay over time</title>
<style>
  :root{
    --bg:#f2f3f5;
    --text:#0c1222;
    --muted:#6b7280;
    --brand:#0c1140;
    --card:#ffffff;
    --pillWrap:#eef0f4;
    --line:#e6e8ec;
    --shadow:0 14px 34px rgba(16,24,40,.14);
    --radius:22px;
    --t:.35s cubic-bezier(.2,.8,.2,1);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;background:var(--bg);color:var(--text);
    font:15px -apple-system,BlinkMacSystemFont,"SF Pro Text",Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    -webkit-font-smoothing:antialiased
  }
  .app{max-width:460px;height:100svh;margin:0 auto;position:relative;overflow:hidden}
  .views{display:flex;width:200%;height:100%;transition:transform var(--t)}
  .view{width:100%;height:100%;overflow:auto}
  .pos-0 .views{transform:translateX(0%)}
  .pos-1 .views{transform:translateX(-50%)}
  .view::-webkit-scrollbar{width:0;height:0}

  .topbar{position:sticky;top:0;z-index:5;background:transparent;padding:18px 18px 8px}
  .titleRow{display:flex;align-items:center;justify-content:space-between}
  h1{margin:0;font-weight:900;letter-spacing:.2px}
  .title{font-size:32px}
  .icons{display:flex;gap:10px}
  .circle{width:38px;height:38px;border-radius:12px;background:#fff;display:grid;place-items:center;border:1px solid var(--line)}
  .circle svg{width:20px;height:20px;opacity:.9}

  .cardWrap{padding:10px 18px 24px}
  .card{background:var(--card);border-radius:26px;padding:18px 16px 22px;box-shadow:var(--shadow)}
  .segWrap{
    background:var(--pillWrap);
    border-radius:999px;
    padding:8px;
    margin-bottom:18px;
  }
  .segBtn{
    display:block;width:100%;
    background:var(--brand);color:#fff;
    font-weight:900;border:0;border-radius:999px;
    padding:14px 18px;text-align:left;
    box-shadow:0 6px 14px rgba(12,17,64,.25);
    cursor:pointer;
  }

  .ppill{
    display:flex;align-items:center;gap:10px;
    border:1px solid var(--line);border-radius:999px;
    padding:14px 18px;background:#fff;color:var(--text);
    font-weight:800;margin-bottom:16px
  }
  .ppill .bolt{width:18px;height:18px}
  .amt{font-size:56px;line-height:1;font-weight:900;letter-spacing:-.5px;margin:8px 2px 18px}
  .cta{
    display:block;width:100%;border:0;border-radius:999px;
    background:#0b0f3d;color:#fff;padding:16px 18px;
    font-weight:900;font-size:18px;cursor:pointer;
  }

  .tabs{
    position:fixed;left:0;right:0;bottom:0;
    background:#fff;border-top:1px solid var(--line);
  }
  .tabs .row{max-width:460px;margin:0 auto;display:flex;justify-content:space-around;gap:8px;padding:10px 8px 12px}
  .tabBtn{flex:1;display:flex;flex-direction:column;align-items:center;gap:6px;color:#293046;text-decoration:none}
  .tabBtn svg{width:24px;height:24px;opacity:.9}
  .tabBtn.active{color:#0b0f3d}
  .tabLabel{font-weight:800}

  .managePad{padding:10px 18px 110px}
  .tabsBar{display:flex;gap:22px;border-bottom:1.5px solid var(--line);margin:8px 0 18px}
  .tabLink{padding:10px 2px 12px;font-weight:800;color:#222}
  .tabLink.active{position:relative}
  .tabLink.active::after{
    content:"";position:absolute;left:0;right:0;bottom:-1.5px;height:3px;background:#0b0f3d;border-radius:999px
  }
  .bigMsg{font-size:22px;font-weight:900;margin:18px 2px 10px}
  .subtle{color:var(--muted);line-height:1.5;font-weight:600}

  .safe{height:84px}

  /* Modal sheet */
  .sheet{position:fixed;inset:0;display:grid;place-items:end center;pointer-events:none;z-index:20}
  .sheet.active{pointer-events:auto}
  .dim{position:absolute;inset:0;background:rgba(0,0,0,.45);opacity:0;transition:opacity var(--t)}
  .sheet.active .dim{opacity:1}
  .panel{width:100%;max-width:460px;background:#fff;border-radius:24px 24px 0 0;transform:translateY(100%);transition:transform var(--t);box-shadow:0 -18px 40px rgba(0,0,0,.28)}
  .sheet.active .panel{transform:translateY(0)}
  .panelHead{display:flex;align-items:center;justify-content:center;padding:12px 16px 6px;position:relative}
  .panelTitle{font-weight:900;font-size:20px}
  .closeX{position:absolute;left:14px;top:8px;width:36px;height:36px;border-radius:12px;border:1px solid var(--line);background:#f3f4f8;font-weight:900;font-size:20px}
  .pages{display:flex;width:400%;transition:transform var(--t)}
  .page{width:100%;padding:6px 16px 20px}
  .label{font-weight:800;margin:12px 2px 8px}
  .field{width:100%;border:1px solid var(--line);border-radius:14px;padding:12px 14px;font:inherit}
  .primary{display:block;width:100%;border:0;border-radius:14px;background:#0b0f3d;color:#fff;padding:14px 16px;font-weight:900;margin:14px 0 6px;opacity:.85}
  .primary.enabled{opacity:1;cursor:pointer}
  .small{color:var(--muted);font-weight:600;font-size:13px}

  /* Amount field (big) */
  .moneyWrap{display:flex;align-items:center;border:1px solid var(--line);border-radius:16px;padding:12px 14px}
  .moneyWrap .prefix{font-weight:900;font-size:28px;margin-right:6px}
  .moneyInput{border:0;outline:none;font:inherit;font-weight:900;font-size:36px;flex:1;min-width:0}
  .moneyInput::placeholder{color:#c1c4cc}

  /* Loading */
  .loadBox{padding:20px 16px 24px;text-align:center}
  .spinner{width:30px;height:30px;border-radius:50%;border:3px solid #e5e7eb;border-top-color:#0b0f3d;animation:spin 1s linear infinite;margin:10px auto 14px}
  @keyframes spin{to{transform:rotate(360deg)}}

  /* Plans */
  .plans{padding:6px 4px 18px}
  .planCard{border:1px solid var(--line);border-radius:16px;padding:14px 14px 12px;background:#fff;box-shadow:0 8px 22px rgba(17,24,39,.06);margin:10px 0}
  .planTop{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}
  .planName{font-weight:900}
  .apr{font-weight:800;color:#0b0f3d;background:#eef0fb;border-radius:999px;padding:6px 10px;font-size:12px}
  .bigPay{font-size:28px;font-weight:900;margin:6px 0 2px}
  .desc{color:var(--muted);font-weight:600}
  .down{margin-top:6px;font-weight:800}
  .chooseBtn{margin-top:10px;display:block;width:100%;border:0;border-radius:12px;background:#0b0f3d;color:#fff;padding:12px 14px;font-weight:900}
</style>
</head>
<body>
<div class="app pos-0" id="app">

  <div class="views">
    <!-- CARD VIEW -->
    <section class="view" id="cardView">
      <div class="topbar">
        <div class="titleRow">
          <h1 class="title">Card</h1>
          <div class="icons">
            <div class="circle" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="#111" stroke-width="2"><path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 5 15a1.65 1.65 0 0 0-1.51-1H3.4a2 2 0 1 1 0-4h.09A1.65 1.65 0 0 0 5 8a1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 1 1 7.44 3.3l.06.06c.47.47 1.14.61 1.82.33H9.4A1.65 1.65 0 0 0 11 2.18V2a2 2 0 1 1 4 0v.09c0 .67.39 1.28 1 1.51h.08c.68.28 1.35.14 1.82-.33l.06-.06A2 2 0 1 1 20.64 6l-.06.06A1.65 1.65 0 0 0 20.4 8c0 .67.39 1.28 1 1.51h.09a2 2 0 1 1 0 4h-.09c-.61.23-1 .84-1 1.49Z"/></svg>
            </div>
            <div class="circle" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="#111" stroke-width="2"><path d="M1.5 12s4-7 10.5-7 10.5 7 10.5 7-4 7-10.5 7S1.5 12 1.5 12Z"/><circle cx="12" cy="12" r="3"/></svg>
            </div>
            <div class="circle" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="#111" stroke-width="2"><path d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg>
            </div>
          </div>
        </div>
      </div>

      <div class="cardWrap">
        <div class="card">
          <div class="segWrap">
            <button class="segBtn" type="button">Pay over time</button>
          </div>

          <div class="ppill">
            <svg class="bolt" viewBox="0 0 24 24" fill="none" stroke="#0b0f3d" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M13 2L3 14h7l-1 8 10-12h-7l1-8z"/>
            </svg>
            Purchasing power
          </div>

          <div class="amt">$11,910</div>

          <button class="cta" type="button" id="openPlan">Plan a purchase</button>
        </div>
      </div>

      <div class="safe"></div>
    </section>

    <!-- MANAGE VIEW -->
    <section class="view" id="manageView">
      <div class="topbar">
        <div class="titleRow">
          <h1 class="title">Manage</h1>
          <div class="icons">
            <div class="circle" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="#111" stroke-width="2">
                <path d="M20 21a8 8 0 1 0-16 0"/><circle cx="12" cy="7" r="4"/>
              </svg>
            </div>
            <div class="circle" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="#111" stroke-width="2"><path d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg>
            </div>
          </div>
        </div>
      </div>

      <div class="managePad">
        <div class="tabsBar">
          <div class="tabLink active">Active</div>
        </div>

        <div class="bigMsg">Your purchases are paid off</div>
        <div class="subtle">
          Explore exclusive deals and get flexible payment plans at top stores.
        </div>
      </div>
    </section>
  </div>

  <!-- Bottom tabs -->
  <nav class="tabs">
    <div class="row">
      <a href="#" id="tabCard" class="tabBtn active" aria-label="Card">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="5" width="20" height="14" rx="2"/><path d="M2 10h20"/></svg>
        <div class="tabLabel">Card</div>
      </a>
      <a href="#" id="tabManage" class="tabBtn" aria-label="Manage">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v12M6 12h12"/></svg>
        <div class="tabLabel">Manage</div>
      </a>
    </div>
  </nav>
</div>

<!-- PLAN SHEET -->
<div class="sheet" id="planSheet" aria-hidden="true">
  <div class="dim" id="planDim"></div>
  <div class="panel">
    <div class="panelHead">
      <button class="closeX" id="planClose" aria-label="Close">×</button>
      <div class="panelTitle" id="planTitle">Plan a purchase</div>
    </div>

    <div class="pages" id="planPages">
      <!-- Step 1: Merchant -->
      <div class="page">
        <div class="label">Merchant</div>
        <input class="field" id="merchantInput" placeholder="e.g., Amazon" autocomplete="off" />
        <button class="primary" id="toAmount" disabled>Continue</button>
        <div class="small">We’ll use this to personalize your plan.</div>
      </div>

      <!-- Step 2: Amount -->
      <div class="page">
        <div class="label">Purchase amount</div>
        <div class="moneyWrap">
          <div class="prefix">$</div>
          <input id="amountInput" class="moneyInput" inputmode="decimal" step="0.01" placeholder="0.00" autocomplete="off" />
        </div>
        <button class="primary" id="toLoading" disabled>Continue</button>
        <div class="small">Use numbers only. You’ll see plans next.</div>
      </div>

      <!-- Step 3: Loading -->
      <div class="page">
        <div class="loadBox">
          <div class="spinner"></div>
          <div class="bigMsg" style="text-align:center">Finding plans for you</div>
          <div class="subtle" style="text-align:center">This just takes a moment…</div>
        </div>
      </div>

      <!-- Step 4: Plans -->
      <div class="page">
        <div class="label" id="plansHeader">Plans</div>
        <div class="plans" id="plansList"></div>
        <div class="small" id="plansFoot"></div>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  const app = document.getElementById('app');
  const tabCard = document.getElementById('tabCard');
  const tabManage = document.getElementById('tabManage');
  function go(pos){
    app.className = 'app pos-' + pos;
    if(pos===0){ tabCard.classList.add('active'); tabManage.classList.remove('active'); }
    else{ tabManage.classList.add('active'); tabCard.classList.remove('active'); }
  }
  tabCard.addEventListener('click', e=>{ e.preventDefault(); go(0); });
  tabManage.addEventListener('click', e=>{ e.preventDefault(); go(1); });

  // --- Plan Sheet Flow ---
  const sheet = document.getElementById('planSheet');
  const dim = document.getElementById('planDim');
  const closeBtn = document.getElementById('planClose');
  const openPlan = document.getElementById('openPlan');
  const pages = document.getElementById('planPages');

  const merchantInput = document.getElementById('merchantInput');
  const toAmountBtn = document.getElementById('toAmount');
  const amountInput = document.getElementById('amountInput');
  const toLoadingBtn = document.getElementById('toLoading');
  const plansList = document.getElementById('plansList');
  const plansFoot = document.getElementById('plansFoot');
  const planTitle = document.getElementById('planTitle');

  let step = 0;
  let merchant = '';
  let amount = 0;

  const fmtUSD = n => n.toLocaleString(undefined,{style:'currency',currency:'USD'});

  function openSheet(){
    sheet.classList.add('active');
    goStep(0);
    merchantInput.value = '';
    amountInput.value = '';
    toAmountBtn.disabled = true; toAmountBtn.classList.remove('enabled');
    toLoadingBtn.disabled = true; toLoadingBtn.classList.remove('enabled');
    plansList.innerHTML = '';
    plansFoot.textContent = '';
    planTitle.textContent = 'Plan a purchase';
  }
  function closeSheet(){ sheet.classList.remove('active'); }
  function goStep(n){
  step = n;
  const total = pages.children.length || 1;     // e.g., 4 pages
  const pct = (100 / total) * n;                // 0, 25, 50, 75 …
  pages.style.transform = `translateX(-${pct}%)`;
}

  openPlan.addEventListener('click', openSheet);
  dim.addEventListener('click', closeSheet);
  closeBtn.addEventListener('click', closeSheet);
  document.addEventListener('keydown',e=>{ if(e.key==='Escape') closeSheet(); });

  merchantInput.addEventListener('input', ()=>{
    merchant = (merchantInput.value||'').trim();
    const ok = merchant.length>0;
    toAmountBtn.disabled = !ok;
    toAmountBtn.classList.toggle('enabled', ok);
  });

  toAmountBtn.addEventListener('click', ()=>{ if(toAmountBtn.disabled) return; goStep(1); });

  function parseAmount(){ 
    const raw = (amountInput.value||'').replace(/[^\d.]/g,'');
    const n = parseFloat(raw);
    return isFinite(n) ? Math.max(0, Math.round(n*100)/100) : 0;
  }
  amountInput.addEventListener('input', ()=>{
    amount = parseAmount();
    const ok = amount>0;
    toLoadingBtn.disabled = !ok;
    toLoadingBtn.classList.toggle('enabled', ok);
  });

  toLoadingBtn.addEventListener('click', ()=>{
    if(toLoadingBtn.disabled) return;
    goStep(2); // loading
    planTitle.textContent = merchant ? `Plans for ${merchant}` : 'Plans';
    setTimeout(()=>{ // 3s simulated fetch
      renderPlans(amount);
      goStep(3);
    }, 3000);
  });

  function renderPlans(purchase){
    plansList.innerHTML = '';
    const cards = [];

    // Bi-weekly (Pay in 4, no interest)
    const biCount = 4;
    const biPay = round2(purchase / biCount);
    const biTotal = round2(biPay * biCount);
    cards.push(makePlanCard({
      name:'Bi-weekly (Pay in 4)',
      apr:'0% APR',
      big: `${fmtUSD(biPay)} x ${biCount}`,
      desc:`Every 2 weeks • Total ${fmtUSD(biTotal)}`,
      down:`Downpayment today ${fmtUSD(biPay)}`
    }));

    // 6 month (20%)
    const sixTotal = round2(purchase * 1.20);
    const sixPay = round2(sixTotal / 6);
    cards.push(makePlanCard({
      name:'6 months',
      apr:'20% APR',
      big:`${fmtUSD(sixPay)} / mo`,
      desc:`6 payments • Total ${fmtUSD(sixTotal)}`
    }));

    // 12 month (25%) only if >=100
    if(purchase >= 100){
      const t12 = round2(purchase * 1.25);
      const p12 = round2(t12 / 12);
      cards.push(makePlanCard({
        name:'12 months',
        apr:'25% APR',
        big:`${fmtUSD(p12)} / mo`,
        desc:`12 payments • Total ${fmtUSD(t12)}`
      }));
    }

    cards.forEach(c=>plansList.appendChild(c));
    plansFoot.textContent = `Based on a purchase of ${fmtUSD(purchase)} at ${merchant || 'your store'}.`;
  }

  function makePlanCard({name, apr, big, desc, down}){
    const el = document.createElement('div');
    el.className = 'planCard';
    el.innerHTML = `
      <div class="planTop">
        <div class="planName">${name}</div>
        <div class="apr">${apr}</div>
      </div>
      <div class="bigPay">${big}</div>
      <div class="desc">${desc}</div>
      ${down ? `<div class="down">${down}</div>` : ``}
      <button class="chooseBtn" type="button">Select plan</button>
    `;
    return el;
  }

  function round2(n){ return Math.round(n*100)/100; }
})();
</script>
</body>
</html>
