<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Card</title>
<style>
  :root{
    --bg:#f4f6fb; --ink:#0c1324; --muted:#6d7280; --brand:#0b0f3b;
    --card:#ffffff; --outline:#e5e8f1; --radius:24px;
    --t:.25s cubic-bezier(.2,.8,.2,1);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--ink);
    font:16px/1.35 ui-sans-serif,system-ui,"SF Pro Text",Inter,Segoe UI,Roboto,Helvetica,Arial;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }

  /* Layout */
  main{max-width:760px;margin:0 auto;padding:12px 18px calc(20px + env(safe-area-inset-bottom))}
  .page-title{margin:6px 2px 14px;font-size:34px;font-weight:800;letter-spacing:-.02em}
  .sr{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}

  /* Segmented control */
  .segmented{
    --pad:6px;
    display:grid; grid-template-columns:1fr 1fr; position:relative; isolation:isolate;
    background:#e9edf5; padding:var(--pad); border-radius:999px;
    box-shadow:inset 0 0 0 1px var(--outline);
    margin:6px 2px 18px; overflow:hidden;
    touch-action:manipulation;
  }
  .segmented .thumb{
    position:absolute; top:var(--pad); bottom:var(--pad); left:var(--pad);
    width:calc((100% - (var(--pad) * 2)) / 2); /* exact half of track, no drift */
    background:var(--brand); border-radius:999px;
    box-shadow:0 10px 22px rgba(11,15,59,.25);
    transform:translate3d(0,0,0); transition:transform var(--t);
    will-change:transform; pointer-events:none;
  }
  .segmented[data-active="1"] .thumb{ transform:translate3d(100%,0,0); }
  .segmented button{
    -webkit-tap-highlight-color:transparent; user-select:none;
    border:0; background:none; padding:12px 18px; border-radius:999px;
    font-weight:800; font-size:15px; color:#1e2743; z-index:1; cursor:pointer;
  }
  .segmented[data-active="0"] button:first-of-type,
  .segmented[data-active="1"] button:last-of-type{ color:#fff; }

  /* Cards / panels */
  .card{
    background:var(--card); border-radius:var(--radius);
    padding:18px 18px 20px; margin:0 2px 18px;
    box-shadow:0 18px 40px rgba(7,13,40,.08);
    overflow:hidden; /* prevents any visual bleed */
  }
  .kicker,.chip{
    display:inline-flex;align-items:center;gap:8px;
    padding:8px 12px;border-radius:999px;border:1px solid var(--outline);
    color:#1f2745;background:#f7f9ff
  }
  .kicker svg{width:16px;height:16px}
  .big{font-size:48px;line-height:1;font-weight:800;letter-spacing:-.02em;margin:14px 2px 8px}
  .sub{color:var(--muted);margin:4px 2px 14px}

  .primary,.ghost{
    width:100%; padding:14px 18px; border-radius:999px; font-weight:800;
    border:1.5px solid #0d153a; transition:transform var(--t),opacity var(--t);
  }
  .primary{background:#0d153a;color:#fff}
  .ghost{background:transparent;color:#0d153a}
  .primary:active,.ghost:active{transform:translateY(1px)}

  /* Plan a purchase screen */
  .inline-header{display:flex;align-items:center;gap:8px;margin:2px 0 10px}
  .inline-header .page-title{margin:0}
  .back{
    border:0;background:#eef2fb;border-radius:12px; width:40px;height:40px;
    font-size:22px;line-height:40px;text-align:center;cursor:pointer;
  }
  .sheet{background:var(--card);border-radius:var(--radius);padding:16px 16px 18px;box-shadow:0 18px 40px rgba(7,13,40,.08)}
  .field{display:flex;flex-direction:column;gap:8px;margin:4px 0 12px}
  .field span{font-weight:700}
  input{
    font:inherit; padding:14px 14px; border-radius:16px;
    border:1.5px solid #cfd5e7; outline:0; background:#ffffff;
    box-shadow:0 4px 0 rgba(12,19,36,.03) inset;
  }
  button[disabled]{opacity:.45;pointer-events:none}

  /* Bottom tab bar */
  .tabs{
    position:sticky;bottom:0;left:0;right:0;
    backdrop-filter:saturate(180%) blur(12px);
    background:rgba(250,252,255,.75);
    border-top:1px solid var(--outline);
    padding:8px max(16px, env(safe-area-inset-left)) calc(8px + env(safe-area-inset-bottom)) max(16px, env(safe-area-inset-right));
    display:flex;gap:18px;justify-content:center;font-weight:800
  }
  .tabs button{
    border:0;background:none;padding:10px 12px;border-radius:12px;cursor:pointer;
    color:#1c2644
  }
  .tabs button[aria-current="page"]{background:#e9edf6}

  @media (max-width:420px){
    .big{font-size:42px}
  }
</style>
</head>
<body>

<!-- ===================== CARD (HOME) ===================== -->
<main id="home" aria-labelledby="home-title">
  <h1 id="home-title" class="page-title">Card</h1>

  <div class="segmented" data-active="0" role="tablist" aria-label="Payment mode">
    <i class="thumb" aria-hidden="true"></i>
    <button role="tab" aria-selected="true" tabindex="0">Pay over time</button>
    <button role="tab" aria-selected="false" tabindex="-1">Pay in full</button>
  </div>

  <!-- Pay over time -->
  <section class="card" data-panel="time" role="tabpanel" aria-label="Pay over time">
    <div class="kicker">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M13 3L4 14h7l-1 7 9-11h-7l1-7Z"/>
      </svg>
      Purchasing power
    </div>
    <div class="big">$11,910</div>
    <button class="primary plan-btn" type="button">Plan a purchase</button>
  </section>

  <!-- Pay in full -->
  <section class="card" data-panel="full" role="tabpanel" aria-label="Pay in full" hidden>
    <div class="chip">üè¶&nbsp;Sapphire Checking</div>
    <div class="big">$298.04</div>
    <div class="sub">Available balance</div>
    <button class="ghost" type="button">Go</button>
  </section>
</main>

<!-- ===================== PLAN A PURCHASE ===================== -->
<main id="plan" hidden aria-labelledby="plan-title">
  <header class="inline-header">
    <button class="back" type="button" onclick="route('home')" aria-label="Back">‚Äπ</button>
    <h1 id="plan-title" class="page-title">Plan a purchase</h1>
  </header>

  <form class="sheet" onsubmit="return false;">
    <label class="field">
      <span>Merchant</span>
      <input id="merchant" placeholder="e.g., Amazon" inputmode="text" autocomplete="off" />
    </label>
    <button id="continue" class="primary" type="submit" disabled>Continue</button>
  </form>
</main>

<!-- ===================== MANAGE (placeholder) ===================== -->
<main id="manage" hidden aria-labelledby="manage-title">
  <h1 id="manage-title" class="page-title">Manage</h1>
  <section class="card">
    <div class="sub">Settings & details coming soon.</div>
  </section>
</main>

<!-- Bottom Tabs -->
<nav class="tabs" aria-label="Primary">
  <button id="tab-card"   aria-current="page" onclick="openTab('home')">Card</button>
  <button id="tab-manage" aria-current="false" onclick="openTab('manage')">Manage</button>
</nav>

<script>
  // ------- Segmented control logic -------
  const seg = document.querySelector('.segmented');
  const segBtns = seg.querySelectorAll('button');
  const panels = {
    time: document.querySelector('[data-panel="time"]'),
    full: document.querySelector('[data-panel="full"]')
  };
  function setMode(idx){
    seg.dataset.active = idx;
    segBtns.forEach((b,i)=>{
      const sel = i===idx;
      b.setAttribute('aria-selected', sel);
      b.tabIndex = sel ? 0 : -1;
    });
    panels.time.hidden = idx!==0;
    panels.full.hidden = idx!==1;
  }
  segBtns.forEach((btn,i)=>btn.addEventListener('click', ()=>setMode(i)));
  setMode(0);

  // ------- Routing between screens -------
  const screens = { home:document.getElementById('home'),
                    plan:document.getElementById('plan'),
                    manage:document.getElementById('manage') };

  function route(name){
    for(const k in screens){ screens[k].hidden = (k!==name); }
    document.getElementById('tab-card').setAttribute('aria-current', name==='home' ? 'page' : 'false');
    document.getElementById('tab-manage').setAttribute('aria-current', name==='manage' ? 'page' : 'false');
    window.scrollTo({top:0,behavior:'instant'});
  }
  function openTab(name){ route(name); }
  document.querySelector('.plan-btn').addEventListener('click', ()=>route('plan'));
  window.route = route; window.openTab = openTab;

  // ------- Plan a purchase: enable Continue when text is present -------
  const merch = document.getElementById('merchant');
  const cont  = document.getElementById('continue');
  merch.addEventListener('input', ()=>{ cont.disabled = merch.value.trim()===''; });
</script>
</body>
</html>
