<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>Card ‚Ä¢ Pay over time</title>
<style>
  :root{
    --bg:#f3f4f6;
    --card:#ffffff;
    --ink:#0b1220;
    --muted:#6b7280;
    --brand:#0c1040;
    --brand-ink:#e8ebff;
    --accent:#0a0f7a;
    --pill:#0c1040;
    --shadow:0 10px 28px rgba(16,24,40,.15);
    --radius:24px;
    --t:.28s cubic-bezier(.2,.8,.2,1)
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--ink);
    font:16px ui-sans-serif,system-ui,-apple-system,"SF Pro Text",Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    -webkit-font-smoothing:antialiased}
  .app{max-width:480px;height:100svh;margin:0 auto;position:relative;overflow:hidden;background:var(--bg)}
  .views{display:flex;width:200%;height:100%;transition:transform var(--t)}
  .view{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}
  .header{position:sticky;top:0;z-index:5;background:linear-gradient(180deg,#f3f4f6,#f3f4f6 70%,transparent);padding:18px 18px 8px}
  .title{font-size:36px;font-weight:900;letter-spacing:-.5px}
  .icons{position:absolute;right:16px;top:12px;display:flex;gap:10px}
  .ib{width:40px;height:40px;border-radius:12px;background:#fff;display:grid;place-items:center;box-shadow:0 2px 10px rgba(0,0,0,.07)}
  .card{margin:14px; padding:18px 18px 22px;background:var(--card);border-radius:28px;box-shadow:var(--shadow)}
  .seg{background:#eef0f6;border-radius:999px;padding:8px;display:flex}
  .seg .tab{flex:1;padding:10px 14px;border-radius:999px;text-align:center;font-weight:800}
  .seg .tab.active{background:var(--pill);color:#fff;box-shadow:inset 0 0 0 2px rgba(255,255,255,.08),0 6px 16px rgba(12,16,64,.35)}
  .chip{margin:16px 0 6px;border:1.5px solid #e6e8ef;border-radius:999px;padding:12px 16px;font-weight:800;color:#111;display:flex;align-items:center;gap:10px}
  .chip svg{width:18px;height:18px}
  .big{font-size:62px;line-height:1;font-weight:900;letter-spacing:-1.2px;margin:10px 2px 18px}
  .cta{display:block;width:100%;border:0;border-radius:999px;background:#0b0f4f;color:#fff;font-weight:900;padding:18px 20px;font-size:18px}
  .tabs{position:sticky;bottom:0;background:#fff;border-top:1px solid #e5e7eb;display:flex;justify-content:space-around;padding:8px 2px 10px}
  .tabs .t{display:flex;flex-direction:column;align-items:center;gap:6px;color:#111}
  .tabs .t svg{width:24px;height:24px}
  .tabs .t.active{color:#0b0f4f;font-weight:800}

  /* Manage view */
  .manageWrap{padding:14px}
  .manageCard{background:#fff;border-radius:20px;padding:18px 18px 24px;box-shadow:var(--shadow)}
  .manageTitle{font-size:28px;font-weight:900;margin:10px 0 14px}
  .tabsMan{display:flex;gap:28px;margin:0 2px 12px;border-bottom:2px solid #e9eaf0}
  .tabsMan .m{padding:12px 0;font-weight:800;position:relative}
  .tabsMan .m.active::after{content:"";position:absolute;left:0;right:0;bottom:-2px;height:3px;background:#0b0f4f;border-radius:3px}
  .muted{color:var(--muted)}

  /* sheet (plan a purchase) */
  .sheet{position:fixed;inset:0;display:grid;place-items:end center;pointer-events:none;z-index:20}
  .dim{position:absolute;inset:0;background:rgba(0,0,0,.35);opacity:0;transition:opacity var(--t)}
  .panel{width:100%;max-width:480px;background:#fff;border-radius:18px 18px 0 0;transform:translateY(100%);transition:transform var(--t);box-shadow:0 -20px 36px rgba(0,0,0,.25);max-height:88vh;display:flex;flex-direction:column}
  .sheet.active{pointer-events:auto}
  .sheet.active .dim{opacity:1}
  .sheet.active .panel{transform:translateY(0)}
  .panelHead{display:flex;align-items:center;gap:10px;padding:12px 16px;border-bottom:1px solid #eef0f3}
  .xbtn{width:36px;height:36px;border-radius:12px;border:0;background:#eef1f6;font-size:18px;font-weight:900;display:grid;place-items:center}
  .panelTitle{flex:1;text-align:center;font-weight:900;font-size:22px}
  .panelBody{padding:14px 16px 16px;overflow:auto}
  .label{font-size:14px;font-weight:800;margin:10px 2px 6px;color:#111}
  .input{width:100%;padding:14px 14px;border:1.5px solid #e1e4ec;border-radius:14px;font:inherit}
  .amountInput{border:0;border-bottom:2px solid #e1e4ec;border-radius:0;padding:8px 2px 10px;margin:2px 0 8px;width:100%;font-weight:900;font-size:44px;letter-spacing:-.5px;outline:none}
  .helper{font-size:13px;color:var(--muted);margin-top:4px}
  .panelFoot{position:sticky;bottom:0;background:#0b0f4f;color:#fff;border-radius:14px;margin:8px 0 0;padding:14px 16px;text-align:center;font-weight:900}
  .panelFoot[disabled]{opacity:.4}
  .center{display:grid;place-items:center;gap:12px;padding:10px 8px 6px;text-align:center}
  .spinner{width:22px;height:22px;border-radius:50%;border:3px solid #e9ecff;border-top-color:#0b0f4f;animation:spin 1s linear infinite}
  @keyframes spin{to{transform:rotate(360deg)}}

  /* plans */
  .plansTitle{font-weight:900;margin:4px 2px 10px}
  .plan{background:#fff;border:1.5px solid #e5e7ef;border-radius:18px;padding:16px 14px 14px;margin:10px 2px;box-shadow:0 6px 16px rgba(16,24,40,.05)}
  .planHead{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}
  .badge{background:#eef1ff;color:#0b0f4f;padding:6px 10px;border-radius:999px;font-size:12px;font-weight:900}
  .per{font-size:34px;font-weight:900;letter-spacing:-.3px;margin:6px 0 6px}
  .sub{font-size:14px;color:#5b6170;font-weight:700}
  .down{margin-top:8px;font-weight:900}
  .selectBtn{margin-top:12px;width:100%;border:0;background:#0b0f4f;color:#fff;border-radius:12px;padding:12px 14px;font-weight:900}

  /* nav transitions */
  .pos-0 .views{transform:translateX(0%)} 
  .pos-1 .views{transform:translateX(-50%)}
</style>
</head>
<body>
<div class="app pos-0" id="app">
  <div class="views">
    <!-- CARD VIEW -->
    <section class="view" id="card">
      <div class="header">
        <div class="title">Card</div>
        <div class="icons">
          <div class="ib">‚öôÔ∏è</div>
          <div class="ib">üëÅÔ∏è</div>
          <div class="ib">üí¨</div>
        </div>
      </div>

      <div class="card">
        <div class="seg" aria-hidden="true">
          <div class="tab active">Pay over time</div>
        </div>

        <div class="chip">
          <svg viewBox="0 0 24 24" fill="none" stroke="#0b0f4f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2L3 14h7l-1 8 10-12h-7l1-8z"/></svg>
          Purchasing power
        </div>

        <div class="big">$11,910</div>

        <button class="cta" id="openPlanner">Plan a purchase</button>
      </div>

      <div style="height:28vh"></div>
    </section>

    <!-- MANAGE VIEW -->
    <section class="view" id="manage">
      <div class="header"><div class="title">Manage</div></div>
      <div class="manageWrap">
        <div class="manageCard">
          <div class="tabsMan">
            <div class="m active">Active</div>
          </div>
          <div class="manageTitle">Your purchases are paid off</div>
          <div class="muted">Explore exclusive deals and get flexible payment plans at top stores.</div>
        </div>
      </div>
      <div style="height:30vh"></div>
    </section>
  </div>

  <!-- Tabs -->
  <nav class="tabs" id="tabs">
    <div class="t active" data-view="card">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="6" rx="2" ry="2" width="18" height="12"></rect><path d="M3 10h18"/></svg>
      <div>Card</div>
    </div>
    <div class="t" data-view="manage">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="3"></circle><path d="M20 21a8 8 0 10-16 0"/></svg>
      <div>Manage</div>
    </div>
  </nav>
</div>

<!-- PLAN A PURCHASE SHEET -->
<div class="sheet" id="sheet">
  <div class="dim" id="dim"></div>
  <div class="panel" role="dialog" aria-modal="true" aria-labelledby="sheetTitle">
    <div class="panelHead">
      <button class="xbtn" id="closeX">‚úï</button>
      <div class="panelTitle" id="sheetTitle">Plan a purchase</div>
      <div style="width:36px"></div>
    </div>

    <div class="panelBody" id="steps">
      <!-- Step 1 -->
      <div class="step" data-step="merchant">
        <div class="label">Merchant</div>
        <input id="merchant" class="input" placeholder="e.g., Amazon" autocomplete="off"/>
        <div class="helper">Where are you shopping?</div>
        <button class="panelFoot" id="toAmount" disabled>Continue</button>
      </div>

      <!-- Step 2 -->
      <div class="step" data-step="amount" style="display:none">
        <div class="label">Purchase amount</div>
        <input id="amount" class="amountInput" inputmode="decimal" pattern="[0-9]*" placeholder="0.00"/>
        <div class="helper">Numbers only. You‚Äôll see plans next.</div>
        <button class="panelFoot" id="toLoading" disabled>Continue</button>
      </div>

      <!-- Loading -->
      <div class="step" data-step="loading" style="display:none">
        <div class="center" style="margin-top:12px">
          <div class="spinner" aria-hidden="true"></div>
          <div style="font-weight:900;font-size:22px" id="loadingTitle">Finding plans for you</div>
          <div class="muted">This just takes a moment.</div>
        </div>
      </div>

      <!-- Plans -->
      <div class="step" data-step="plans" style="display:none">
        <div class="plansTitle">Plans</div>
        <div id="plansList"></div>
        <div class="helper" id="basis"></div>
      </div>
    </div>
  </div>
</div>

<script>
(()=>{
  const app=document.getElementById('app');
  // bottom tabs
  document.querySelectorAll('#tabs .t').forEach(t=>{
    t.addEventListener('click',()=>{
      document.querySelectorAll('#tabs .t').forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
      const v=t.dataset.view==='manage'?1:0;
      app.className='app pos-'+v;
    });
  });

  /* Sheet logic */
  const sheet=document.getElementById('sheet');
  const dim=document.getElementById('dim');
  const closeX=document.getElementById('closeX');
  const openPlanner=document.getElementById('openPlanner');

  const stepsWrap=document.getElementById('steps');
  const setStep=(name)=>{
    stepsWrap.querySelectorAll('.step').forEach(s=>s.style.display = (s.dataset.step===name)?'block':'none');
  };
  function openSheet(){ sheet.classList.add('active'); setStep('merchant'); document.getElementById('merchant').focus(); }
  function closeSheet(){ sheet.classList.remove('active'); }

  openPlanner.addEventListener('click',openSheet);
  dim.addEventListener('click',closeSheet); closeX.addEventListener('click',closeSheet);
  document.addEventListener('keydown',e=>{ if(e.key==='Escape') closeSheet(); });

  // Step 1
  const merch=document.getElementById('merchant');
  const toAmount=document.getElementById('toAmount');
  merch.addEventListener('input',()=>{ toAmount.disabled = merch.value.trim().length<1; });
  toAmount.addEventListener('click',()=>{ setStep('amount'); amt.focus(); });

  // Step 2
  const amt=document.getElementById('amount');
  const toLoading=document.getElementById('toLoading');
  function parseAmount(){ const n = parseFloat((amt.value||'').replace(/[^\d.]/g,'')); return isFinite(n)? +(n.toFixed(2)) : NaN; }
  amt.addEventListener('input',()=>{
    // keep only numbers & dot visually formatted
    toLoading.disabled = !(parseAmount() > 0);
  });

  toLoading.addEventListener('click',()=>{
    setStep('loading');
    document.getElementById('loadingTitle').textContent = `Finding plans for ${merch.value.trim()||'you'}`;
    setTimeout(()=>{ buildPlans(); setStep('plans'); },3000);
  });

  function fmt(n){ return n.toLocaleString(undefined,{style:'currency',currency:'USD'}); }

  function buildPlans(){
    const m = merch.value.trim() || 'your merchant';
    const a = parseAmount()||0;
    const list = document.getElementById('plansList');
    list.innerHTML = '';
    const items=[];

    // Bi-weekly (pay in 4, 0% APR)
    const biPay = +(a/4).toFixed(2);
    items.push({
      title:'Bi-weekly (Pay in 4)',
      apr:'0% APR',
      per:`${fmt(biPay)} x 4`,
      sub:`Every 2 weeks ‚Ä¢ Total ${fmt(a)}`,
      down:`Downpayment today ${fmt(biPay)}`
    });

    // 6 months (20%)
    const tot6 = +(a*1.20).toFixed(2);
    items.push({
      title:'6 months',
      apr:'20% APR',
      per:`${fmt(tot6/6)} / mo`,
      sub:`6 payments ‚Ä¢ Total ${fmt(tot6)}`
    });

    // 12 months if >= $100
    if(a>=100){
      const tot12 = +(a*1.25).toFixed(2);
      items.push({
        title:'12 months',
        apr:'25% APR',
        per:`${fmt(tot12/12)} / mo`,
        sub:`12 payments ‚Ä¢ Total ${fmt(tot12)}`
      });
    }

    items.forEach(p=>{
      const card=document.createElement('div');
      card.className='plan';
      card.innerHTML = `
        <div class="planHead">
          <div style="font-weight:900">${p.title}</div>
          <div class="badge">${p.apr}</div>
        </div>
        <div class="per">${p.per}</div>
        <div class="sub">${p.sub}</div>
        ${p.down?`<div class="down">${p.down}</div>`:''}
        <button class="selectBtn">Select plan</button>
      `;
      list.appendChild(card);
    });
    document.getElementById('basis').textContent = `Based on a purchase of ${fmt(a)} at ${m}.`;
  }
})();
</script>
</body>
</html>
